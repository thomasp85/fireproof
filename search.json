[{"path":[]},{"path":"https://thomasp85.github.io/fireproof/CODE_OF_CONDUCT.html","id":"our-pledge","dir":"","previous_headings":"","what":"Our Pledge","title":"Contributor Covenant Code of Conduct","text":"members, contributors, leaders pledge make participation community harassment-free experience everyone, regardless age, body size, visible invisible disability, ethnicity, sex characteristics, gender identity expression, level experience, education, socio-economic status, nationality, personal appearance, race, caste, color, religion, sexual identity orientation. pledge act interact ways contribute open, welcoming, diverse, inclusive, healthy community.","code":""},{"path":"https://thomasp85.github.io/fireproof/CODE_OF_CONDUCT.html","id":"our-standards","dir":"","previous_headings":"","what":"Our Standards","title":"Contributor Covenant Code of Conduct","text":"Examples behavior contributes positive environment community include: Demonstrating empathy kindness toward people respectful differing opinions, viewpoints, experiences Giving gracefully accepting constructive feedback Accepting responsibility apologizing affected mistakes, learning experience Focusing best just us individuals, overall community Examples unacceptable behavior include: use sexualized language imagery, sexual attention advances kind Trolling, insulting derogatory comments, personal political attacks Public private harassment Publishing others’ private information, physical email address, without explicit permission conduct reasonably considered inappropriate professional setting","code":""},{"path":"https://thomasp85.github.io/fireproof/CODE_OF_CONDUCT.html","id":"enforcement-responsibilities","dir":"","previous_headings":"","what":"Enforcement Responsibilities","title":"Contributor Covenant Code of Conduct","text":"Community leaders responsible clarifying enforcing standards acceptable behavior take appropriate fair corrective action response behavior deem inappropriate, threatening, offensive, harmful. Community leaders right responsibility remove, edit, reject comments, commits, code, wiki edits, issues, contributions aligned Code Conduct, communicate reasons moderation decisions appropriate.","code":""},{"path":"https://thomasp85.github.io/fireproof/CODE_OF_CONDUCT.html","id":"scope","dir":"","previous_headings":"","what":"Scope","title":"Contributor Covenant Code of Conduct","text":"Code Conduct applies within community spaces, also applies individual officially representing community public spaces. Examples representing community include using official e-mail address, posting via official social media account, acting appointed representative online offline event.","code":""},{"path":"https://thomasp85.github.io/fireproof/CODE_OF_CONDUCT.html","id":"enforcement","dir":"","previous_headings":"","what":"Enforcement","title":"Contributor Covenant Code of Conduct","text":"Instances abusive, harassing, otherwise unacceptable behavior may reported community leaders responsible enforcement codeofconduct@posit.co. complaints reviewed investigated promptly fairly. community leaders obligated respect privacy security reporter incident.","code":""},{"path":"https://thomasp85.github.io/fireproof/CODE_OF_CONDUCT.html","id":"enforcement-guidelines","dir":"","previous_headings":"","what":"Enforcement Guidelines","title":"Contributor Covenant Code of Conduct","text":"Community leaders follow Community Impact Guidelines determining consequences action deem violation Code Conduct:","code":""},{"path":"https://thomasp85.github.io/fireproof/CODE_OF_CONDUCT.html","id":"id_1-correction","dir":"","previous_headings":"Enforcement Guidelines","what":"1. Correction","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Use inappropriate language behavior deemed unprofessional unwelcome community. Consequence: private, written warning community leaders, providing clarity around nature violation explanation behavior inappropriate. public apology may requested.","code":""},{"path":"https://thomasp85.github.io/fireproof/CODE_OF_CONDUCT.html","id":"id_2-warning","dir":"","previous_headings":"Enforcement Guidelines","what":"2. Warning","title":"Contributor Covenant Code of Conduct","text":"Community Impact: violation single incident series actions. Consequence: warning consequences continued behavior. interaction people involved, including unsolicited interaction enforcing Code Conduct, specified period time. includes avoiding interactions community spaces well external channels like social media. Violating terms may lead temporary permanent ban.","code":""},{"path":"https://thomasp85.github.io/fireproof/CODE_OF_CONDUCT.html","id":"id_3-temporary-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"3. Temporary Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: serious violation community standards, including sustained inappropriate behavior. Consequence: temporary ban sort interaction public communication community specified period time. public private interaction people involved, including unsolicited interaction enforcing Code Conduct, allowed period. Violating terms may lead permanent ban.","code":""},{"path":"https://thomasp85.github.io/fireproof/CODE_OF_CONDUCT.html","id":"id_4-permanent-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"4. Permanent Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Demonstrating pattern violation community standards, including sustained inappropriate behavior, harassment individual, aggression toward disparagement classes individuals. Consequence: permanent ban sort public interaction within community.","code":""},{"path":"https://thomasp85.github.io/fireproof/CODE_OF_CONDUCT.html","id":"attribution","dir":"","previous_headings":"","what":"Attribution","title":"Contributor Covenant Code of Conduct","text":"Code Conduct adapted Contributor Covenant, version 2.1, available https://www.contributor-covenant.org/version/2/1/code_of_conduct.html. Community Impact Guidelines inspired [Mozilla’s code conduct enforcement ladder][https://github.com/mozilla/inclusion]. answers common questions code conduct, see FAQ https://www.contributor-covenant.org/faq. Translations available https://www.contributor-covenant.org/translations.","code":""},{"path":"https://thomasp85.github.io/fireproof/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 fireproof authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://thomasp85.github.io/fireproof/articles/fireproof.html","id":"authorizationentication","dir":"Articles","previous_headings":"","what":"Auth(orization/entication)","title":"Introduction to auth with fireproof","text":"use authentication authorization part internet since beginning years number different schemas developed . words (authentication authorization) used (sometimes haphazardly) often combined single “auth” different meaning beneficial establish move : act authenticating someone establish identity. terms webservers challenge user prove . Proof identity simple, even without added layer distance internet offers. standard approach provide user type secret (often password) know challenge provide secret prove . sounds quite sensible, raises another concern: send secret server without anyone reading ? first schema come (called Basic auth) closed ’s eyes simply transmitted username password plain text request. Subsequent schemas created elaborate handshakes avoid transmission sensible information still allowing server ensure user possession password (e.g. Digest, HOBA, SCRAM name ). However, advent https-everywhere complications now moot, basic schema just secure (provided using https anyway handling authentication). might think end story — user transmits username password encrypted request everyone’s happy — ’d wrong. danger approach every server authentication needs handle database usernames passwords secure way, history taught us anything users love reuse passwords, servers love store insecurely. led range new schemas outsources authentication third (trusted) party allows server forget storing sensible information (part). pinnacle OAuth 2.0 framework superseded OAuth SAML one way another powers “Sign ” buttons see internet today. authentication , left authorization? Authorization usually comes authentication establishment privileges user . obvious example even successfully logged server probably shouldn’t allowed change password user — authorized change settings . Authorization also whether access certain resource, e.g. financial report, database, offices secret santa pairing. authorization terms often use word scope mean specific privilege action user allowed perform. said authorization usually comes authentication — stand ? circumstances don’t care user , just secret string anyone possession access service. expect everyone share decency share others avoid whole thing falling apart. case secret bound single user way authenticating user, however ’d still use provide authorization. many issues approach, e.g. secret leaked way recover create new secret share everyone using old secret (except leaked ). upside less easy implementation. OAuth 2.0, discussed authentication, actually authorization framework. way user authorize third party (server) access resources another provider (e.g. GitHub). However, used authentication taking granted authorization asking resources identify user (e.g. name, email, unique id). use OAuth 2.0 (somewhat different core purpose) formalized OpenID Connect authentication schema build top OAuth 2.0. providers, e.g. Google, offers OAuth 2.0 OpenID Connect, others, e.g. GitHub, offers OAuth 2.0 use homegrown authentication endpoint.","code":""},{"path":"https://thomasp85.github.io/fireproof/articles/fireproof.html","id":"authentication","dir":"Articles","previous_headings":"","what":"Authentication","title":"Introduction to auth with fireproof","text":"act authenticating someone establish identity. terms webservers challenge user prove . Proof identity simple, even without added layer distance internet offers. standard approach provide user type secret (often password) know challenge provide secret prove . sounds quite sensible, raises another concern: send secret server without anyone reading ? first schema come (called Basic auth) closed ’s eyes simply transmitted username password plain text request. Subsequent schemas created elaborate handshakes avoid transmission sensible information still allowing server ensure user possession password (e.g. Digest, HOBA, SCRAM name ). However, advent https-everywhere complications now moot, basic schema just secure (provided using https anyway handling authentication). might think end story — user transmits username password encrypted request everyone’s happy — ’d wrong. danger approach every server authentication needs handle database usernames passwords secure way, history taught us anything users love reuse passwords, servers love store insecurely. led range new schemas outsources authentication third (trusted) party allows server forget storing sensible information (part). pinnacle OAuth 2.0 framework superseded OAuth SAML one way another powers “Sign ” buttons see internet today.","code":""},{"path":"https://thomasp85.github.io/fireproof/articles/fireproof.html","id":"authorization","dir":"Articles","previous_headings":"","what":"Authorization","title":"Introduction to auth with fireproof","text":"authentication , left authorization? Authorization usually comes authentication establishment privileges user . obvious example even successfully logged server probably shouldn’t allowed change password user — authorized change settings . Authorization also whether access certain resource, e.g. financial report, database, offices secret santa pairing. authorization terms often use word scope mean specific privilege action user allowed perform. said authorization usually comes authentication — stand ? circumstances don’t care user , just secret string anyone possession access service. expect everyone share decency share others avoid whole thing falling apart. case secret bound single user way authenticating user, however ’d still use provide authorization. many issues approach, e.g. secret leaked way recover create new secret share everyone using old secret (except leaked ). upside less easy implementation. OAuth 2.0, discussed authentication, actually authorization framework. way user authorize third party (server) access resources another provider (e.g. GitHub). However, used authentication taking granted authorization asking resources identify user (e.g. name, email, unique id). use OAuth 2.0 (somewhat different core purpose) formalized OpenID Connect authentication schema build top OAuth 2.0. providers, e.g. Google, offers OAuth 2.0 OpenID Connect, others, e.g. GitHub, offers OAuth 2.0 use homegrown authentication endpoint.","code":""},{"path":"https://thomasp85.github.io/fireproof/articles/fireproof.html","id":"the-fireproof-auth-flow","dir":"Articles","previous_headings":"","what":"The fireproof auth flow","title":"Introduction to auth with fireproof","text":"firm grasp nomenclature auth can proceed discuss implemented fireproof. go various key concepts fireproof along code examples showing tie together. Central fireproof concept guards. modules defines specific approach auth, e.g. Basic auth OAuth 2.0. Guards subclasses Guard class constructed using guard_* prefixed functions. wanted define guard using Basic auth reach guard_basic() constructor: basic guard needs single input: function checks username password pair returns TRUE ’s valid. course useless demonstration — reality ’d compare pair database properly stored passwords (salted hashed). , basic guard seems simple merely shifts complexity towards properly handling password database. might reach another simple guard based simple key (read drawbacks ) look cookie request called -key compare value value FIREPROOF_SECRET environment variable. may think guards deceptively simple complicated one, OAuth 2 based guard, require much set . However, intricacies taken care shouldn’t steer away fear complexity can see doesn’t require much. specify URL google redirect user authorization, guard takes care setting route handler need register server Google upon ’ll receive client id client secret used part authorization flow — ’s . Guards doesn’t anything , rather encapsulations auth challenges used server (use directly inside handler intention focus vignette). collect various guards server uses (single guard might ) must reach Fireproof plugin: plugin doesn’t anything right now. First, needs attached fiery server, next needs auth handlers attached. Attaching works way fiery plugins. addition relies persistent session storage using firesale plugin must attached prior attaching fireproof plugin: adding auth endpoint, read … fireproof plugin consists two main parts: guards (covered ) use guards auth handlers. Chances parts server requires authentication, parts perhaps even require different authentication challenges. server requires single authentication challenge every endpoint activating surmounts ’s ! free spend development time elsewhere project now. still reading guess may require slightly elaborate (nothing wrong suits needs btw). need differentiated auth server read . first way might differentiate authentication turn paths setting flow NULL Now, despite basic_auth used everything via /* path, specific /public/* path ensure subpaths /public require authentication. might want accept either basic guard key guard pass endpoints. , just modify flow expression: point might thinking : “flow argument even? Come think , never defined basic_auth variable anywhere… ’s going !?”. flow argument takes logical expression referencing guards name (name provided added ). Upon evaluation value names substituted boolean indicating guard passed . expression consisting ||, &&, (/) valid, though sanity probably make logic complex. may even reference guards haven’t added yet. Let’s wrap adding complex flow endpoint","code":"basic <- guard_basic(   validate = function(username, password) {     username == \"thomasp85\" && password == \"noonewillguessthis\"   } ) key <- guard_key(   key_name = \"my-key\",   validate = Sys.getenv(\"FIREPROOF_SECRET\") ) google <- guard_google(   redirect_url = \"https://my-app.com/auth\",   client_id = \"MY_APP\",   client_secret = Sys.getenv(\"MY_APP_SECRET\") ) fp <- Fireproof$new()  fp$add_guard(basic, name = \"basic_auth\") fp$add_guard(key, name = \"key_auth\") fp$add_guard(google, name = \"google_auth\")  fp #> A fireproof plugin with 3 guards and 2 handlers app <- fiery::Fire$new()  fs <- firesale::FireSale$new(storr::driver_environment()) app$attach(fs)  # The app is now ready to use the fireproof plugin app$attach(fp) fp$add_auth(   method = \"all\",    path = \"/*\",   flow = basic_auth # Assuming you are using the basic guard we defined above ) fp$add_auth(   method = \"get\",   path = \"/public/*\",   flow = NULL ) fp$add_auth(   method = \"get\",   path = \"/basic_or_key\",   flow = basic_auth || key_auth ) fp$add_auth(   method = \"get\",   path = \"/sensitive/*\",   flow = google_auth || (basic_auth && key_auth) )"},{"path":"https://thomasp85.github.io/fireproof/articles/fireproof.html","id":"guards","dir":"Articles","previous_headings":"","what":"Guards","title":"Introduction to auth with fireproof","text":"Central fireproof concept guards. modules defines specific approach auth, e.g. Basic auth OAuth 2.0. Guards subclasses Guard class constructed using guard_* prefixed functions. wanted define guard using Basic auth reach guard_basic() constructor: basic guard needs single input: function checks username password pair returns TRUE ’s valid. course useless demonstration — reality ’d compare pair database properly stored passwords (salted hashed). , basic guard seems simple merely shifts complexity towards properly handling password database. might reach another simple guard based simple key (read drawbacks ) look cookie request called -key compare value value FIREPROOF_SECRET environment variable. may think guards deceptively simple complicated one, OAuth 2 based guard, require much set . However, intricacies taken care shouldn’t steer away fear complexity can see doesn’t require much. specify URL google redirect user authorization, guard takes care setting route handler need register server Google upon ’ll receive client id client secret used part authorization flow — ’s .","code":"basic <- guard_basic(   validate = function(username, password) {     username == \"thomasp85\" && password == \"noonewillguessthis\"   } ) key <- guard_key(   key_name = \"my-key\",   validate = Sys.getenv(\"FIREPROOF_SECRET\") ) google <- guard_google(   redirect_url = \"https://my-app.com/auth\",   client_id = \"MY_APP\",   client_secret = Sys.getenv(\"MY_APP_SECRET\") )"},{"path":"https://thomasp85.github.io/fireproof/articles/fireproof.html","id":"the-plugin","dir":"Articles","previous_headings":"","what":"The plugin","title":"Introduction to auth with fireproof","text":"Guards doesn’t anything , rather encapsulations auth challenges used server (use directly inside handler intention focus vignette). collect various guards server uses (single guard might ) must reach Fireproof plugin: plugin doesn’t anything right now. First, needs attached fiery server, next needs auth handlers attached. Attaching works way fiery plugins. addition relies persistent session storage using firesale plugin must attached prior attaching fireproof plugin: adding auth endpoint, read …","code":"fp <- Fireproof$new()  fp$add_guard(basic, name = \"basic_auth\") fp$add_guard(key, name = \"key_auth\") fp$add_guard(google, name = \"google_auth\")  fp #> A fireproof plugin with 3 guards and 2 handlers app <- fiery::Fire$new()  fs <- firesale::FireSale$new(storr::driver_environment()) app$attach(fs)  # The app is now ready to use the fireproof plugin app$attach(fp)"},{"path":"https://thomasp85.github.io/fireproof/articles/fireproof.html","id":"auth-endpoints","dir":"Articles","previous_headings":"","what":"Auth endpoints","title":"Introduction to auth with fireproof","text":"fireproof plugin consists two main parts: guards (covered ) use guards auth handlers. Chances parts server requires authentication, parts perhaps even require different authentication challenges. server requires single authentication challenge every endpoint activating surmounts ’s ! free spend development time elsewhere project now. still reading guess may require slightly elaborate (nothing wrong suits needs btw). need differentiated auth server read . first way might differentiate authentication turn paths setting flow NULL Now, despite basic_auth used everything via /* path, specific /public/* path ensure subpaths /public require authentication. might want accept either basic guard key guard pass endpoints. , just modify flow expression: point might thinking : “flow argument even? Come think , never defined basic_auth variable anywhere… ’s going !?”. flow argument takes logical expression referencing guards name (name provided added ). Upon evaluation value names substituted boolean indicating guard passed . expression consisting ||, &&, (/) valid, though sanity probably make logic complex. may even reference guards haven’t added yet. Let’s wrap adding complex flow endpoint","code":"fp$add_auth(   method = \"all\",    path = \"/*\",   flow = basic_auth # Assuming you are using the basic guard we defined above ) fp$add_auth(   method = \"get\",   path = \"/public/*\",   flow = NULL ) fp$add_auth(   method = \"get\",   path = \"/basic_or_key\",   flow = basic_auth || key_auth ) fp$add_auth(   method = \"get\",   path = \"/sensitive/*\",   flow = google_auth || (basic_auth && key_auth) )"},{"path":"https://thomasp85.github.io/fireproof/articles/fireproof.html","id":"scopes","dir":"Articles","previous_headings":"","what":"Scopes","title":"Introduction to auth with fireproof","text":"One thing haven’t touched notion scopes. may recall, difference authentication authorization just user able login doesn’t mean privilege perform actions. Scopes something guard can grant endpoint can require. Granted scopes stack, meaning one guard grants read scope another grants write scope user read write scope permissions (provided guards passed). scopes guards flow considered. guard grant flow? guards validate argument can take function. standard use function return TRUE user authorized FALSE . However, can also return character vector case user authorized return value considered scopes granted guard. can update basic guard grant read write scopes like side coin, endpoint requirements, scope requirement provided add auth handler. Scopes always required, great way add fine grained authorization server cases needed.","code":"basic <- guard_basic(   validate = function(username, password) {     if (username == \"thomasp85\" && password == \"noonewillguessthis\") {       c(\"read\", \"write\")     } else {       FALSE     }   } ) # Replace old guard fp$add_guard(basic, name = \"basic_auth\") fp$add_auth(   method = \"post\",   path = \"/settings\",   flow = basic_auth,   scope = \"write\" )"},{"path":"https://thomasp85.github.io/fireproof/articles/fireproof.html","id":"persistent-login","dir":"Articles","previous_headings":"","what":"Persistent login","title":"Introduction to auth with fireproof","text":"user authenticates fireproof using guards, authentication persists long users session. new visits endpoint another endpoint using guard authentication result new authentication challenge considered passed right away. fireproof relies firesale plugin keeping persistent session storage can shared server instances running parallel. guard write fireproof field session storage field given name. example, basic guard defined write fireproof$basic_auth element session storage. gets written depends guards user_info function. user provided function presented different user information (guard_basic() presented username, guard_bearer() presented token, etc) returns user information constructed new_user_info(). can update basic guard use : route handler access information like OAuth 2 OpenID Connect guards user info filled automatically. also contain token field contains information token issued authorization server can used access resources users behalf need . persistent storage serves two purposes. First, shown , allows endpoint handlers get access information authenticated user standardized format. Second, mere existence sign fireproof guard authenticated user thus powers persistent session authentication. means order force logout (thus require authentication upon next visit) clear session storage guard:","code":"basic <- guard_basic(   validate = function(username, password) {     if (username == \"thomasp85\" && password == \"noonewillguessthis\") {       c(\"read\", \"write\")     } else {       FALSE     }   },   user_info = function(user) {     # You'd probably have a database lookup here     new_user_info(       id = user,       name_given = \"Thomas\",       name_family = \"Pedersen\",       favourite_color = \"pink\"     )   } ) # Replace old guard fp$add_guard(basic, name = \"basic_auth\") route <- routr::Route$new() route$add_handler(   method = \"get\",    path = \"/hello\",   handler = function(request, response, arg_list, ...) {     user_info <- arg_list$datastore$session$fireproof$basic_auth     response$body <- paste0(\"Hi \", user_info$name$given)     response$status <- 200L     response$type <- \"text/plain\"     TRUE   } ) route$add_handler(   method = \"post\",    path = \"/logout\",   handler = function(request, response, arg_list, ...) {     arg_list$datastore$session$fireproof$basic_auth <- NULL     response$status_with_text(200L)     TRUE   } )"},{"path":"https://thomasp85.github.io/fireproof/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Thomas Lin Pedersen. Author, maintainer. Posit, PBC. Copyright holder, funder.","code":""},{"path":"https://thomasp85.github.io/fireproof/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Pedersen T (2025). fireproof: Authentication Authorization 'fiery' Servers. R package version 0.1.0.9000, https://github.com/thomasp85/fireproof.","code":"@Manual{,   title = {fireproof: Authentication and Authorization for 'fiery' Servers},   author = {Thomas Lin Pedersen},   year = {2025},   note = {R package version 0.1.0.9000},   url = {https://github.com/thomasp85/fireproof}, }"},{"path":"https://thomasp85.github.io/fireproof/index.html","id":"fireproof","dir":"","previous_headings":"","what":"Authentication and Authorization for fiery Servers","title":"Authentication and Authorization for fiery Servers","text":"fireproof plugin fiery based servers. provides unified framework adding authentication server backend. fireproof supports multiple authentication routes endpoint can specify access certain endpoint requires either passing /challenges. logic can arbitrarily complex though sanity probably shouldn’t.","code":""},{"path":"https://thomasp85.github.io/fireproof/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Authentication and Authorization for fiery Servers","text":"fireproof can installed CRAN install.packages(\"fireproof\"). Alternatively, can install development version fireproof GitHub :","code":"# install.packages(\"pak\") pak::pak(\"thomasp85/fireproof\")"},{"path":"https://thomasp85.github.io/fireproof/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Authentication and Authorization for fiery Servers","text":"basic example shows solve common problem:","code":"library(fireproof)  # Create the plugin proof <- Fireproof$new()  # Create two different guards key_auth <- guard_key(   key_name = \"FireproofKey\",   validate = \"VerySecretString\",   cookie = FALSE ) basic_auth <- guard_basic(   validate = function(user, password, ...) {     user == \"thomas\" && password == \"1234\"   } )  # Add them to the plugin proof$add_guard(key_auth, \"key\") proof$add_guard(basic_auth, \"basic\")  # Add authentication to some endpoints with varying combinations of requirements proof$add_auth(\"get\", \"/user/settings\", basic) # must pass basic auth proof$add_auth(\"get\", \"/api/predict\", key || basic) # must pass either proof$add_auth(\"get\", \"/strong/auth\", key && basic) # must pass both  # If you have even more authenticators you can group conditions with () as well   # Create a fiery app with a firestore plugin and attach the plugin app <- fiery::Fire$new() fs <- firesale::FireSale$new(storr::driver_environment()) app$attach(fs)  app$attach(proof)"},{"path":"https://thomasp85.github.io/fireproof/index.html","id":"oauth-20-and-openid-connect","dir":"","previous_headings":"","what":"OAuth 2.0 and OpenID Connect","title":"Authentication and Authorization for fiery Servers","text":"lot authorization internet moved towards OAuth 2.0 authentication layer build top (OpenID Connect). fireproof supports basic constructors flows take required authorization discovery endpoints takes care rest. also comes selection predefined constructors well-known providers Google GitHub makes easy use . want use another provider one already available ’ll invite create PR based current providers implemented. way can gradually grow number providers offered box based community needs.","code":""},{"path":"https://thomasp85.github.io/fireproof/index.html","id":"current-oauthopenid-connect-support","dir":"","previous_headings":"OAuth 2.0 and OpenID Connect","what":"Current OAuth/OpenID Connect support","title":"Authentication and Authorization for fiery Servers","text":"Google✽ GitHub Beeceptor (Used mocking) ✽ OpenID Connect","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":null,"dir":"Reference","previous_headings":"","what":"A plugin that handles authentication and/or authorization — Fireproof","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"plugin orchestrates guards fiery app. special Route manages different guards defined well testing endpoints auth requirements.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"guard object deriving Guard class usually created one guard_*() constructors. can provide name register can thus multiple instances scheme (e.g. two guard_basic() different user lists) auth handler handler consists method, path, flow. flow logical expression various guards request must pass get access endpoint. example, two guards named auth1 auth2, flow auth1 || auth2 allow request passes either guards. Given additional guard, auth3, also something like auth1 || (auth2 && auth3). flow given bare expression, string. addition three required arguments can also supply character vector scopes required access endpoint. guard scope support request tested see (otherwise valid) user permission resource.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"super-class","dir":"Reference","previous_headings":"","what":"Super class","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"routr::Route -> Fireproof","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"active-bindings","dir":"Reference","previous_headings":"","what":"Active bindings","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"name name plugin: \"fireproof\" require Required plugins Fireproof guards name guards currently added plugin","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"routr::Route$dispatch() routr::Route$get_handler() routr::Route$initialize() routr::Route$merge_route() routr::Route$remap_handlers() routr::Route$remove_handler()","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"Fireproof$print() Fireproof$add_auth() Fireproof$add_guard() Fireproof$add_handler() Fireproof$flow_to_openapi() Fireproof$on_attach() Fireproof$clone()","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"method-print-","dir":"Reference","previous_headings":"","what":"Method print()","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"Print method class","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"","code":"Fireproof$print(...)"},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"... Ignored","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"method-add-auth-","dir":"Reference","previous_headings":"","what":"Method add_auth()","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"Add new authentication handler. invisibly returns parsed flow can used generating OpenAPI specs .","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"","code":"Fireproof$add_auth(method, path, flow, scope = NULL)"},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"method http method match handler path URL path match flow authentication flow request must pass valid. See Details. NULL authentication turned endpoint. scope optional character vector scopes request must permission access resource","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"method-add-guard-","dir":"Reference","previous_headings":"","what":"Method add_guard()","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"Add guard plugin","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"","code":"Fireproof$add_guard(guard, name = NULL)"},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"guard Either Guard object defining guard (preferred) function taking standard route handler arguments (request, response, keys, ...) returns TRUE request valid FALSE . name name guard used defining flow endpoint auth.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"method-add-handler-","dir":"Reference","previous_headings":"","what":"Method add_handler()","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"Defunct overwrite add_handler() method prevent route used anything auth. throw error called.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"","code":"Fireproof$add_handler(method, path, handler, reject_missing_methods = FALSE)"},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"method ignored path ignored handler ignored reject_missing_methods ignored","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"method-flow-to-openapi-","dir":"Reference","previous_headings":"","what":"Method flow_to_openapi()","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"Turns parsed flow (returned add_auth()) OpenAPI Security Requirement compliant list. flows can represented OpenAPI spec method return NULL warning . Scope added schemes, even applicable, final OpenAPI doc run prune_openapi() serving .","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"","code":"Fireproof$flow_to_openapi(flow, scope)"},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"arguments-4","dir":"Reference","previous_headings":"","what":"Arguments","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"flow parsed flow returned add_auth() scope character vector scopes required particular flow","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"method-on-attach-","dir":"Reference","previous_headings":"","what":"Method on_attach()","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"Method use fiery attached plugin. called directly. method looks header route stack app exist creates one. attaches plugin first route .","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"usage-5","dir":"Reference","previous_headings":"","what":"Usage","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"","code":"Fireproof$on_attach(app, ...)"},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"arguments-5","dir":"Reference","previous_headings":"","what":"Arguments","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"app Fire object attach router ... Ignored","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"method-clone-","dir":"Reference","previous_headings":"","what":"Method clone()","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"objects class cloneable method.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"usage-6","dir":"Reference","previous_headings":"","what":"Usage","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"","code":"Fireproof$clone(deep = FALSE)"},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"arguments-6","dir":"Reference","previous_headings":"","what":"Arguments","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"deep Whether make deep clone.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Fireproof.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"A plugin that handles authentication and/or authorization — Fireproof","text":"","code":"# Create a fireproof plugin fp <- Fireproof$new()  # Create some authentication schemes and add them basic <- guard_basic(   validate = function(user, password) {     user == \"thomas\" && password == \"pedersen\"   },   user_info = function(user) {     new_user_info(       name_given = \"Thomas\",       name_middle = \"Lin\",       name_family = \"Pedersen\"     )   } ) fp$add_guard(basic, \"basic_auth\")  key <- guard_key(   key_name = \"my-key-location\",   validate = \"SHHH!!DONT_TELL_ANYONE\" ) fp$add_guard(key, \"key_auth\")  google <- guard_google(   redirect_url = \"https://example.com/auth\",   client_id = \"MY_APP_ID\",   client_secret = \"SUCHASECRET\", ) fp$add_guard(google, \"google_auth\")  # Add authentication to different paths fp$add_auth(\"get\", \"/require_basic\", basic_auth)  fp$add_auth(\"get\", \"/require_basic_and_key\", basic_auth && key_auth)  fp$add_auth(   \"get\",   \"/require_google_or_the_others\",   google_auth || (basic_auth && key_auth) )  # Add plugin to fiery app app <- fiery::Fire$new()  # First add the firesale plugin as it is required fs <- firesale::FireSale$new(storr::driver_environment(new.env())) app$attach(fs)  # Then add the fireproof plugin app$attach(fp)"},{"path":"https://thomasp85.github.io/fireproof/reference/Guard.html","id":null,"dir":"Reference","previous_headings":"","what":"R6 base class for guards — Guard","title":"R6 base class for guards — Guard","text":"guards inherit base class adapts particular scheme implements. Additional schemes can implemented subclasses work transparently fireproof.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Guard.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 base class for guards — Guard","text":"","code":"is_guard(x)"},{"path":"https://thomasp85.github.io/fireproof/reference/Guard.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 base class for guards — Guard","text":"x object","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Guard.html","id":"active-bindings","dir":"Reference","previous_headings":"","what":"Active bindings","title":"R6 base class for guards — Guard","text":"name name instance open_api OpenID compliant security scheme description","code":""},{"path":[]},{"path":"https://thomasp85.github.io/fireproof/reference/Guard.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"R6 base class for guards — Guard","text":"Guard$new() Guard$check_request() Guard$reject_response() Guard$forbid_user() Guard$register_handler() Guard$clone()","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Guard.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"R6 base class for guards — Guard","text":"Constructor class","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Guard.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 base class for guards — Guard","text":"","code":"Guard$new(name = NULL)"},{"path":"https://thomasp85.github.io/fireproof/reference/Guard.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 base class for guards — Guard","text":"name name scheme instance","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Guard.html","id":"method-check-request-","dir":"Reference","previous_headings":"","what":"Method check_request()","title":"R6 base class for guards — Guard","text":"function validates incoming request, returning TRUE valid FALSE . base class simply returns TRUE requests","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Guard.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 base class for guards — Guard","text":"","code":"Guard$check_request(request, response, keys, ..., .datastore)"},{"path":"https://thomasp85.github.io/fireproof/reference/Guard.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 base class for guards — Guard","text":"request request validate Request object response corresponding response request Response object keys named list path parameters path matching ... Ignored .datastore data storage firesale","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Guard.html","id":"method-reject-response-","dir":"Reference","previous_headings":"","what":"Method reject_response()","title":"R6 base class for guards — Guard","text":"Action perform response case request fails get validated instance flow. failing instances method called one one mindful overwriting information set another instance","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Guard.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 base class for guards — Guard","text":"","code":"Guard$reject_response(response, scope, ..., .datastore)"},{"path":"https://thomasp85.github.io/fireproof/reference/Guard.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 base class for guards — Guard","text":"response response object scope scope endpoint ... Ignored .datastore data storage firesale","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Guard.html","id":"method-forbid-user-","dir":"Reference","previous_headings":"","what":"Method forbid_user()","title":"R6 base class for guards — Guard","text":"Action perform response case request necessary permissions endpoint. succeeding instances method called one one permissions insufficient mindful overwriting information set another instance","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Guard.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 base class for guards — Guard","text":"","code":"Guard$forbid_user(response, scope, ..., .datastore)"},{"path":"https://thomasp85.github.io/fireproof/reference/Guard.html","id":"arguments-4","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 base class for guards — Guard","text":"response response object scope scope endpoint ... Ignored .datastore data storage firesale","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Guard.html","id":"method-register-handler-","dir":"Reference","previous_headings":"","what":"Method register_handler()","title":"R6 base class for guards — Guard","text":"Hook registering endpoint handlers needed auth method","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Guard.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 base class for guards — Guard","text":"","code":"Guard$register_handler(add_handler)"},{"path":"https://thomasp85.github.io/fireproof/reference/Guard.html","id":"arguments-5","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 base class for guards — Guard","text":"add_handler add_handler method Fireproof called adding additional handlers","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Guard.html","id":"method-clone-","dir":"Reference","previous_headings":"","what":"Method clone()","title":"R6 base class for guards — Guard","text":"objects class cloneable method.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Guard.html","id":"usage-5","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 base class for guards — Guard","text":"","code":"Guard$clone(deep = FALSE)"},{"path":"https://thomasp85.github.io/fireproof/reference/Guard.html","id":"arguments-6","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 base class for guards — Guard","text":"deep Whether make deep clone.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/Guard.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"R6 base class for guards — Guard","text":"","code":"# You'd never actually do this, rather you'd use the subclasses guard <- Guard$new(name = \"base_auth\")"},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBasic.html","id":null,"dir":"Reference","previous_headings":"","what":"R6 class for the Basic authentication guard — GuardBasic","title":"R6 class for the Basic authentication guard — GuardBasic","text":"class encapsulates logic Basic authentication scheme. See guard_basic() information.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBasic.html","id":"super-class","dir":"Reference","previous_headings":"","what":"Super class","title":"R6 class for the Basic authentication guard — GuardBasic","text":"fireproof::Guard -> GuardBasic","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBasic.html","id":"active-bindings","dir":"Reference","previous_headings":"","what":"Active bindings","title":"R6 class for the Basic authentication guard — GuardBasic","text":"open_api OpenID compliant security scheme description","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBasic.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"R6 class for the Basic authentication guard — GuardBasic","text":"fireproof::Guard$forbid_user() fireproof::Guard$register_handler()","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBasic.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"R6 class for the Basic authentication guard — GuardBasic","text":"GuardBasic$new() GuardBasic$check_request() GuardBasic$reject_response() GuardBasic$clone()","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBasic.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"R6 class for the Basic authentication guard — GuardBasic","text":"Constructor class","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBasic.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 class for the Basic authentication guard — GuardBasic","text":"","code":"GuardBasic$new(validate, user_info = NULL, realm = \"private\", name = NULL)"},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBasic.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 class for the Basic authentication guard — GuardBasic","text":"validate function called arguments username, password, realm, request, response returns TRUE user valid, FALSE otherwise. function returns character vector considered authenticated return value understood scopes user granted. user_info function extract user information username. called single argument: user username used successful authentication. function return new user_info list. realm realm authentication corresponds . returned client failed authentication attempt inform credentials required, though often days kept user. name name authentication","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBasic.html","id":"method-check-request-","dir":"Reference","previous_headings":"","what":"Method check_request()","title":"R6 class for the Basic authentication guard — GuardBasic","text":"function validates incoming request, returning TRUE valid FALSE . decodes credentials Authorization header, splits username password calls validate function provided construction.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBasic.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 class for the Basic authentication guard — GuardBasic","text":"","code":"GuardBasic$check_request(request, response, keys, ..., .datastore)"},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBasic.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 class for the Basic authentication guard — GuardBasic","text":"request request validate Request object response corresponding response request Response object keys named list path parameters path matching ... Ignored .datastore data storage firesale","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBasic.html","id":"method-reject-response-","dir":"Reference","previous_headings":"","what":"Method reject_response()","title":"R6 class for the Basic authentication guard — GuardBasic","text":"Upon rejection scheme sets response status 401 sets WWW-Authenticate header Basic realm=\"<realm>\", charset=UTF-8","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBasic.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 class for the Basic authentication guard — GuardBasic","text":"","code":"GuardBasic$reject_response(response, scope, ..., .datastore)"},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBasic.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 class for the Basic authentication guard — GuardBasic","text":"response response object scope scope endpoint ... Ignored .datastore data storage firesale","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBasic.html","id":"method-clone-","dir":"Reference","previous_headings":"","what":"Method clone()","title":"R6 class for the Basic authentication guard — GuardBasic","text":"objects class cloneable method.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBasic.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 class for the Basic authentication guard — GuardBasic","text":"","code":"GuardBasic$clone(deep = FALSE)"},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBasic.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 class for the Basic authentication guard — GuardBasic","text":"deep Whether make deep clone.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBasic.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"R6 class for the Basic authentication guard — GuardBasic","text":"","code":"# Create a guard of dubious quality basic <- GuardBasic$new(   validate = function(user, password) {     user == \"thomas\" && password == \"pedersen\"   },   user_info = function(user) {     new_user_info(       name_given = \"Thomas\",       name_middle = \"Lin\",       name_family = \"Pedersen\"     )   } )"},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBearer.html","id":null,"dir":"Reference","previous_headings":"","what":"R6 class for the Bearer authentication guard — GuardBearer","title":"R6 class for the Bearer authentication guard — GuardBearer","text":"class encapsulates logic Bearer authentication scheme. See guard_bearer() information.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBearer.html","id":"super-class","dir":"Reference","previous_headings":"","what":"Super class","title":"R6 class for the Bearer authentication guard — GuardBearer","text":"fireproof::Guard -> GuardBearer","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBearer.html","id":"active-bindings","dir":"Reference","previous_headings":"","what":"Active bindings","title":"R6 class for the Bearer authentication guard — GuardBearer","text":"open_api OpenID compliant security scheme description","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBearer.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"R6 class for the Bearer authentication guard — GuardBearer","text":"fireproof::Guard$forbid_user() fireproof::Guard$register_handler()","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBearer.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"R6 class for the Bearer authentication guard — GuardBearer","text":"GuardBearer$new() GuardBearer$check_request() GuardBearer$reject_response() GuardBearer$clone()","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBearer.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"R6 class for the Bearer authentication guard — GuardBearer","text":"Constructor class","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBearer.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 class for the Bearer authentication guard — GuardBearer","text":"","code":"GuardBearer$new(   validate,   user_info = NULL,   realm = \"private\",   allow_body_token = TRUE,   allow_query_token = FALSE,   name = NULL )"},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBearer.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 class for the Bearer authentication guard — GuardBearer","text":"validate function called arguments token, realm, request, response returns TRUE token valid, FALSE otherwise. function returns character vector considered authenticated return value understood scopes user granted. user_info function extract user information token. called single argument: token token used successful authentication. function return new user_info list. realm realm authentication corresponds . returned client failed authentication attempt inform credentials required, though often days kept user. allow_body_token allowed pass token request body query form type access_token name. Defaults TRUE can turn force client use Authorization header. allow_query_token allowed pass token query string url access_token name. Default FALSE due severe security implications can turned well-thought-reasons . name name authentication","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBearer.html","id":"method-check-request-","dir":"Reference","previous_headings":"","what":"Method check_request()","title":"R6 class for the Bearer authentication guard — GuardBearer","text":"function validates incoming request, returning TRUE valid FALSE . fetches token request according allow_body_token allow_query_token settings validates according provided function. token present multiple times fail 400 allowed.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBearer.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 class for the Bearer authentication guard — GuardBearer","text":"","code":"GuardBearer$check_request(request, response, keys, ..., .datastore)"},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBearer.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 class for the Bearer authentication guard — GuardBearer","text":"request request validate Request object response corresponding response request Response object keys named list path parameters path matching ... Ignored .datastore data storage firesale","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBearer.html","id":"method-reject-response-","dir":"Reference","previous_headings":"","what":"Method reject_response()","title":"R6 class for the Bearer authentication guard — GuardBearer","text":"Upon rejection scheme sets response status 401 sets WWW-Authenticate header Bearer realm=\"<realm>\". scope provided endpoint appended , scope=\"<scope>\" token present invalid, append , error=\"invalid_token\"","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBearer.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 class for the Bearer authentication guard — GuardBearer","text":"","code":"GuardBearer$reject_response(response, scope, ..., .datastore)"},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBearer.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 class for the Bearer authentication guard — GuardBearer","text":"response response object scope scope endpoint ... Ignored .datastore data storage firesale","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBearer.html","id":"method-clone-","dir":"Reference","previous_headings":"","what":"Method clone()","title":"R6 class for the Bearer authentication guard — GuardBearer","text":"objects class cloneable method.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBearer.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 class for the Bearer authentication guard — GuardBearer","text":"","code":"GuardBearer$clone(deep = FALSE)"},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBearer.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 class for the Bearer authentication guard — GuardBearer","text":"deep Whether make deep clone.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardBearer.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"R6 class for the Bearer authentication guard — GuardBearer","text":"","code":"# Create a guard of dubious quality bearer <- GuardBearer$new(   validate = function(token) {     token == \"abcd1234\"   },   user_info = function(user) {     new_user_info(       name_given = \"Thomas\",       name_middle = \"Lin\",       name_family = \"Pedersen\"     )   } )"},{"path":"https://thomasp85.github.io/fireproof/reference/GuardKey.html","id":null,"dir":"Reference","previous_headings":"","what":"R6 class for the Key guard — GuardKey","title":"R6 class for the Key guard — GuardKey","text":"class encapsulates logic key based authentication scheme. See guard_key() information","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardKey.html","id":"super-class","dir":"Reference","previous_headings":"","what":"Super class","title":"R6 class for the Key guard — GuardKey","text":"fireproof::Guard -> GuardKey","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardKey.html","id":"active-bindings","dir":"Reference","previous_headings":"","what":"Active bindings","title":"R6 class for the Key guard — GuardKey","text":"location location secret request, either \"cookie\" \"header\" open_api OpenID compliant security scheme description","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardKey.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"R6 class for the Key guard — GuardKey","text":"fireproof::Guard$forbid_user() fireproof::Guard$register_handler()","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardKey.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"R6 class for the Key guard — GuardKey","text":"GuardKey$new() GuardKey$check_request() GuardKey$reject_response() GuardKey$clone()","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardKey.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"R6 class for the Key guard — GuardKey","text":"Constructor class","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardKey.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 class for the Key guard — GuardKey","text":"","code":"GuardKey$new(key_name, validate, user_info = NULL, cookie = TRUE, name = NULL)"},{"path":"https://thomasp85.github.io/fireproof/reference/GuardKey.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 class for the Key guard — GuardKey","text":"key_name name header cookie store secret validate Either single string secret function called arguments key, request, response returns TRUE valid secret (useful multiple rotating secrets). function returns character vector considered authenticated return value understood scopes user granted. Make sure never store secrets plain text avoid checking version control. user_info function extract user information key. called single argument: key key used successful authentication. function return new user_info list. cookie Boolean. secret transmitted cookie. FALSE expected transmitted header. name name guard","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardKey.html","id":"method-check-request-","dir":"Reference","previous_headings":"","what":"Method check_request()","title":"R6 class for the Key guard — GuardKey","text":"function validates incoming request, returning TRUE valid FALSE . extracts secret either cookie header based provided key_name test using provided validate function.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardKey.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 class for the Key guard — GuardKey","text":"","code":"GuardKey$check_request(request, response, keys, ..., .datastore)"},{"path":"https://thomasp85.github.io/fireproof/reference/GuardKey.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 class for the Key guard — GuardKey","text":"request request validate Request object response corresponding response request Response object keys named list path parameters path matching ... Ignored .datastore data storage firesale","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardKey.html","id":"method-reject-response-","dir":"Reference","previous_headings":"","what":"Method reject_response()","title":"R6 class for the Key guard — GuardKey","text":"Upon rejection guard sets response status 400 already set others. contrast guards implements proper HTTP schemes, one set WWW-Authenticate header.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardKey.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 class for the Key guard — GuardKey","text":"","code":"GuardKey$reject_response(response, scope, ..., .datastore)"},{"path":"https://thomasp85.github.io/fireproof/reference/GuardKey.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 class for the Key guard — GuardKey","text":"response response object scope scope endpoint ... Ignored .datastore data storage firesale","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardKey.html","id":"method-clone-","dir":"Reference","previous_headings":"","what":"Method clone()","title":"R6 class for the Key guard — GuardKey","text":"objects class cloneable method.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardKey.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 class for the Key guard — GuardKey","text":"","code":"GuardKey$clone(deep = FALSE)"},{"path":"https://thomasp85.github.io/fireproof/reference/GuardKey.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 class for the Key guard — GuardKey","text":"deep Whether make deep clone.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardKey.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"R6 class for the Key guard — GuardKey","text":"","code":"# Create a guard of dubious quality key <- GuardKey$new(   key = \"my-key-location\",   validate = \"SHHH!!DONT_TELL_ANYONE\" )"},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOAuth2.html","id":null,"dir":"Reference","previous_headings":"","what":"R6 class for the OAuth 2.0 Guard — GuardOAuth2","title":"R6 class for the OAuth 2.0 Guard — GuardOAuth2","text":"class encapsulates logic oauth 2.0 based authentication scheme. See guard_oauth2() information","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOAuth2.html","id":"super-class","dir":"Reference","previous_headings":"","what":"Super class","title":"R6 class for the OAuth 2.0 Guard — GuardOAuth2","text":"fireproof::Guard -> GuardOAuth2","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOAuth2.html","id":"active-bindings","dir":"Reference","previous_headings":"","what":"Active bindings","title":"R6 class for the OAuth 2.0 Guard — GuardOAuth2","text":"open_api OpenID compliant security scheme description","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOAuth2.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"R6 class for the OAuth 2.0 Guard — GuardOAuth2","text":"fireproof::Guard$forbid_user()","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOAuth2.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"R6 class for the OAuth 2.0 Guard — GuardOAuth2","text":"GuardOAuth2$new() GuardOAuth2$check_request() GuardOAuth2$reject_response() GuardOAuth2$register_handler() GuardOAuth2$refresh_token() GuardOAuth2$clone()","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOAuth2.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"R6 class for the OAuth 2.0 Guard — GuardOAuth2","text":"Constructor class","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOAuth2.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 class for the OAuth 2.0 Guard — GuardOAuth2","text":"","code":"GuardOAuth2$new(   token_url,   redirect_url,   client_id,   client_secret,   auth_url = NULL,   grant_type = c(\"authorization_code\", \"password\"),   oauth_scopes = NULL,   validate = function(info) TRUE,   redirect_path = get_path(redirect_url),   on_auth = replay_request,   user_info = NULL,   service_params = list(),   scopes_delim = \" \",   name = NULL )"},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOAuth2.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 class for the OAuth 2.0 Guard — GuardOAuth2","text":"token_url URL authorization servers token endpoint redirect_url URL authorization server redirect following successful authorization. Must equivalent one provided registering application client_id ID issued authorization server registering application client_secret secret issued authorization server registering application. store plain text auth_url URL redirect user requesting authorization (needed grant_type = \"authorization_code\") grant_type type authorization scheme use, either \"authorization_code\" \"password\" oauth_scopes Optional character vector scopes request user grant authorization. influence scopes granted validate function fireproof scoping. named, names taken scopes elements descriptions scopes, e.g. given scope, read, can either provided c(\"read\") c(read = \"Grant read access\") validate Function validate user logged . called single argument info, gets information user provided user_info function. default returns TRUE everything meaning anyone can log provider accepted, can provide different function e.g. restrict access certain user names etc. function returns character vector considered authenticated return value understood scopes user granted. redirect_path path capture redirects successful authorization. default derived redirect_url removing domain part url, reason yields correct result server setup can overwrite . on_auth function handle result successful authorization. called four arguments: request, response, session_state, server. first contains current request responded , second response send back, third list recording state original request initiated authorization (containing method, url, headers, body fields information original request). default use replay_request internally replay original request send back response. user_info function extract user information access token. called single argument: token_info access token information returned OAuth 2 server successful authentication. function return new user_info list. service_params named list additional query params add url constructing authorization url \"authorization_code\" grant type scopes_delim separator scopes returned service. default \" \" spec recommendation services cough github cough non-compliant name name guard.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOAuth2.html","id":"method-check-request-","dir":"Reference","previous_headings":"","what":"Method check_request()","title":"R6 class for the OAuth 2.0 Guard — GuardOAuth2","text":"function validates incoming request, returning TRUE valid FALSE .","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOAuth2.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 class for the OAuth 2.0 Guard — GuardOAuth2","text":"","code":"GuardOAuth2$check_request(request, response, keys, ..., .datastore)"},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOAuth2.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 class for the OAuth 2.0 Guard — GuardOAuth2","text":"request request validate Request object response corresponding response request Response object keys named list path parameters path matching ... Ignored .datastore data storage firesale","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOAuth2.html","id":"method-reject-response-","dir":"Reference","previous_headings":"","what":"Method reject_response()","title":"R6 class for the OAuth 2.0 Guard — GuardOAuth2","text":"Upon rejection guard initiates grant flow obtain authorization. can sound bit backwards, want initiate authorization authorization flow need ","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOAuth2.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 class for the OAuth 2.0 Guard — GuardOAuth2","text":"","code":"GuardOAuth2$reject_response(response, scope, ..., .datastore)"},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOAuth2.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 class for the OAuth 2.0 Guard — GuardOAuth2","text":"response response object scope scope endpoint ... Ignored .datastore data storage firesale","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOAuth2.html","id":"method-register-handler-","dir":"Reference","previous_headings":"","what":"Method register_handler()","title":"R6 class for the OAuth 2.0 Guard — GuardOAuth2","text":"Hook registering endpoint handlers needed authentication method","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOAuth2.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 class for the OAuth 2.0 Guard — GuardOAuth2","text":"","code":"GuardOAuth2$register_handler(add_handler)"},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOAuth2.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 class for the OAuth 2.0 Guard — GuardOAuth2","text":"add_handler add_handler method Fireproof called adding additional handlers","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOAuth2.html","id":"method-refresh-token-","dir":"Reference","previous_headings":"","what":"Method refresh_token()","title":"R6 class for the OAuth 2.0 Guard — GuardOAuth2","text":"Refresh access token session. return TRUE upon success FALSE upon failure. Failure can either issues token provider, also lack refresh token.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOAuth2.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 class for the OAuth 2.0 Guard — GuardOAuth2","text":"","code":"GuardOAuth2$refresh_token(session, force = FALSE)"},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOAuth2.html","id":"arguments-4","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 class for the OAuth 2.0 Guard — GuardOAuth2","text":"session session data store force Boolean. token refreshed even expired yet","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOAuth2.html","id":"method-clone-","dir":"Reference","previous_headings":"","what":"Method clone()","title":"R6 class for the OAuth 2.0 Guard — GuardOAuth2","text":"objects class cloneable method.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOAuth2.html","id":"usage-5","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 class for the OAuth 2.0 Guard — GuardOAuth2","text":"","code":"GuardOAuth2$clone(deep = FALSE)"},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOAuth2.html","id":"arguments-5","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 class for the OAuth 2.0 Guard — GuardOAuth2","text":"deep Whether make deep clone.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOAuth2.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"R6 class for the OAuth 2.0 Guard — GuardOAuth2","text":"","code":"# Example using GitHub endpoints (use `guard_github()` in real code) github <- GuardOAuth2$new(   token_url = \"https://github.com/login/oauth/access_token\",   redirect_url = \"https://example.com/auth\",   client_id = \"MY_APP_ID\",   client_secret = \"SUCHASECRET\",   auth_url = \"https://github.com/login/oauth/authorize\",   grant_type = \"authorization_code\" )"},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOIDC.html","id":null,"dir":"Reference","previous_headings":"","what":"R6 class for the OpenID Connect guard — GuardOIDC","title":"R6 class for the OpenID Connect guard — GuardOIDC","text":"class encapsulates logic OpenID Connect based authentication scheme. See guard_oidc() information","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOIDC.html","id":"super-classes","dir":"Reference","previous_headings":"","what":"Super classes","title":"R6 class for the OpenID Connect guard — GuardOIDC","text":"fireproof::Guard -> fireproof::GuardOAuth2 -> GuardOIDC","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOIDC.html","id":"active-bindings","dir":"Reference","previous_headings":"","what":"Active bindings","title":"R6 class for the OpenID Connect guard — GuardOIDC","text":"open_api OpenID compliant security scheme description","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOIDC.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"R6 class for the OpenID Connect guard — GuardOIDC","text":"fireproof::Guard$forbid_user() fireproof::GuardOAuth2$check_request() fireproof::GuardOAuth2$refresh_token() fireproof::GuardOAuth2$register_handler() fireproof::GuardOAuth2$reject_response()","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOIDC.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"R6 class for the OpenID Connect guard — GuardOIDC","text":"GuardOIDC$new() GuardOIDC$clone()","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOIDC.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"R6 class for the OpenID Connect guard — GuardOIDC","text":"Constructor class","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOIDC.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 class for the OpenID Connect guard — GuardOIDC","text":"","code":"GuardOIDC$new(   service_url,   redirect_url,   client_id,   client_secret,   grant_type = c(\"authorization_code\", \"password\"),   oauth_scopes = c(\"profile\"),   request_user_info = FALSE,   validate = function(info) TRUE,   redirect_path = get_path(redirect_url),   on_auth = replay_request,   service_name = service_url,   service_params = list(),   name = NULL )"},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOIDC.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 class for the OpenID Connect guard — GuardOIDC","text":"service_url url authentication service redirect_url URL authorization server redirect following successful authorization. Must equivalent one provided registering application client_id ID issued authorization server registering application client_secret secret issued authorization server registering application. store plain text grant_type type authorization scheme use, either \"authorization_code\" \"password\" oauth_scopes Optional character vector scopes request user grant authorization. influence scopes granted validate function fireproof scoping. named, names taken scopes elements descriptions scopes, e.g. given scope, read, can either provided c(\"read\") c(read = \"Grant read access\") request_user_info Logical. userinfo endpoint followed add information user present JWT token. Setting TRUE add additional API call authentication flow potentially provide richer information user. validate Function validate user logged . must single argument info, gets information user provided user_info function . default returns TRUE everything meaning anyone can log provider accepted, can provide different function e.g. restrict access certain user names etc. redirect_path path capture redirects successful authorization. default derived redirect_url removing domain part url, reason yields correct result server setup can overwrite . on_auth function handle result successful authorization. must four arguments: request, response, session_state, server. first contains current request responded , second response send back, third list recording state original request initiated authorization (containing method, url, headers, body fields information original request). default use replay_request internally replay original request send back response. service_name name service provider. passed provider slot user info list service_params named list additional query params add url constructing authorization url \"authorization_code\" grant type name name scheme instance. also name token info user info saved session store","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOIDC.html","id":"method-clone-","dir":"Reference","previous_headings":"","what":"Method clone()","title":"R6 class for the OpenID Connect guard — GuardOIDC","text":"objects class cloneable method.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOIDC.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 class for the OpenID Connect guard — GuardOIDC","text":"","code":"GuardOIDC$clone(deep = FALSE)"},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOIDC.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 class for the OpenID Connect guard — GuardOIDC","text":"deep Whether make deep clone.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/GuardOIDC.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"R6 class for the OpenID Connect guard — GuardOIDC","text":"","code":"# Example using Google endpoint (use `guard_google()` in real code) google <- GuardOIDC$new(   service_url = \"https://accounts.google.com/\",   redirect_url = \"https://example.com/auth\",   client_id = \"MY_APP_ID\",   client_secret = \"SUCHASECRET\" )"},{"path":"https://thomasp85.github.io/fireproof/reference/fireproof-package.html","id":null,"dir":"Reference","previous_headings":"","what":"fireproof: Authentication and Authorization for 'fiery' Servers — fireproof-package","title":"fireproof: Authentication and Authorization for 'fiery' Servers — fireproof-package","text":"Provides plugin 'fiery' supports various forms authorization authentication schemes. Schemes can required various combinations can combined scopes provide fine-grained access control server.","code":""},{"path":[]},{"path":"https://thomasp85.github.io/fireproof/reference/fireproof-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"fireproof: Authentication and Authorization for 'fiery' Servers — fireproof-package","text":"Maintainer: Thomas Lin Pedersen thomas.pedersen@posit.co (ORCID) contributors: Posit, PBC (ROR) [copyright holder, funder]","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/get_path.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract the path from a URL — get_path","title":"Extract the path from a URL — get_path","text":"function simple helper extract path part URL. useful constructing OAuth 2.0 derived authenticators redirect_path argument.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/get_path.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract the path from a URL — get_path","text":"","code":"get_path(url, root = NULL)"},{"path":"https://thomasp85.github.io/fireproof/reference/get_path.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract the path from a URL — get_path","text":"url url extract path root optional root remove path well","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/get_path.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract the path from a URL — get_path","text":"\"path\" part URL","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/get_path.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract the path from a URL — get_path","text":"","code":"get_path(\"https://example.com/auth\") #> [1] \"/auth\"  get_path(\"https://example.com/api/auth\", root = \"/api\") #> [1] \"/auth\""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_basic.html","id":null,"dir":"Reference","previous_headings":"","what":"Basic authentication guard — guard_basic","title":"Basic authentication guard — guard_basic","text":"Basic authentication HTTP scheme sends username password : separated, base64 encoded string authorization header. effectively send plain text (base64 encoding can easily decoded) ever used along security measures https/ssl avoid username passwords snooped request.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_basic.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Basic authentication guard — guard_basic","text":"","code":"guard_basic(validate, user_info = NULL, realm = \"private\", name = \"BasicAuth\")"},{"path":"https://thomasp85.github.io/fireproof/reference/guard_basic.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Basic authentication guard — guard_basic","text":"validate function called arguments username, password, realm, request, response returns TRUE user valid, FALSE otherwise. function returns character vector considered authenticated return value understood scopes user granted. user_info function extract user information username. called single argument: user username used successful authentication. function return new user_info list. realm realm authentication corresponds . returned client failed authentication attempt inform credentials required, though often days kept user. name name guard","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_basic.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Basic authentication guard — guard_basic","text":"GuardBasic R6 object","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_basic.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Basic authentication guard — guard_basic","text":"guard use user-provided function test username/password pair. server implementation handle storage testing passwords sensible responsible way. See sodium::password_store() good first step towards responsible design.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_basic.html","id":"user-information","dir":"Reference","previous_headings":"","what":"User information","title":"Basic authentication guard — guard_basic","text":"guard_basic() automatically adds user information authentication. default set provider field \"local\" id field username used logging . , set scopes field scopes returned authenticator function.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_basic.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Basic authentication guard — guard_basic","text":"Basic authentication RFC","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_basic.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Basic authentication guard — guard_basic","text":"","code":"# Create a guard of dubious quality basic <- guard_basic(   validate = function(user, password) {     user == \"thomas\" && password == \"pedersen\"   },   user_info = function(user) {     new_user_info(       name_given = \"Thomas\",       name_middle = \"Lin\",       name_family = \"Pedersen\"     )   } )  # Add it to a fireproof plugin fp <- Fireproof$new() fp$add_guard(basic, \"basic_auth\")  # Use it in an endpoint fp$add_auth(\"get\", \"/*\", basic_auth)"},{"path":"https://thomasp85.github.io/fireproof/reference/guard_bearer.html","id":null,"dir":"Reference","previous_headings":"","what":"Bearer authentication guard — guard_bearer","title":"Bearer authentication guard — guard_bearer","text":"Bearer authentication HTTP scheme based tokens. used lot places often used transmitting tokens issued part OAuth 2.0 OpenID Connect authentication. quite simple scheme based concept time- scope-limited bearer tokens. Whoever valid token gains access resources token unlocks. prevents leaking passwords well makes easy rotate tokens etc. time-limited aspect tokens means attacker may gain temporary access resource intercept token transmission, still highly recommended transmit tokens HTTPS","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_bearer.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Bearer authentication guard — guard_bearer","text":"","code":"guard_bearer(   validate,   user_info = NULL,   realm = \"private\",   allow_body_token = TRUE,   allow_query_token = FALSE,   name = \"BearerAuth\" )"},{"path":"https://thomasp85.github.io/fireproof/reference/guard_bearer.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Bearer authentication guard — guard_bearer","text":"validate function called arguments token, realm, request, response returns TRUE token valid, FALSE otherwise. function returns character vector considered authenticated return value understood scopes user granted. user_info function extract user information token. called single argument: token token used successful authentication. function return new user_info list. realm realm authentication corresponds . returned client failed authentication attempt inform credentials required, though often days kept user. allow_body_token allowed pass token request body query form type access_token name. Defaults TRUE can turn force client use Authorization header. allow_query_token allowed pass token query string url access_token name. Default FALSE due severe security implications can turned well-thought-reasons . name name guard","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_bearer.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Bearer authentication guard — guard_bearer","text":"GuardBearer R6 object","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_bearer.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Bearer authentication guard — guard_bearer","text":"validate function provided user used test provided token. complexity test fully depends issuer token. simplest token opaque function test database. However, common use JSON web token encode various information token can help determining scoped access etc. validate function test scope token, rather return vector scopes (implicitly means token valid). scope requirement exact endpoint tested automatically.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_bearer.html","id":"user-information","dir":"Reference","previous_headings":"","what":"User information","title":"Bearer authentication guard — guard_bearer","text":"guard_bearer() automatically adds user information authentication. default set provider field \"local\". , set scopes field scopes returned validate function token field list following elements: access_token: provided token token_type: \"bearer\" scope scopes concatenated space separated string structure mimics structure token information returned OAuth 2.0 OpenID Connect services.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_bearer.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Bearer authentication guard — guard_bearer","text":"Bearer authentication RFC","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_bearer.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Bearer authentication guard — guard_bearer","text":"","code":"# Create a guard of dubious quality bearer <- guard_bearer(   validate = function(token) {     token == \"abcd1234\"   },   user_info = function(user) {     new_user_info(       name_given = \"Thomas\",       name_middle = \"Lin\",       name_family = \"Pedersen\"     )   },   allow_body_token = FALSE )  # Add it to a fireproof plugin fp <- Fireproof$new() fp$add_guard(bearer, \"bearer_auth\")  # Use it in an endpoint fp$add_auth(\"get\", \"/*\", bearer_auth)"},{"path":"https://thomasp85.github.io/fireproof/reference/guard_beeceptor.html","id":null,"dir":"Reference","previous_headings":"","what":"Guard using the mock OAuth servers provided by Beeceptor — guard_beeceptor","title":"Guard using the mock OAuth servers provided by Beeceptor — guard_beeceptor","text":"two functions sets mock OAuth 2.0 guards based tools provided Beeceptor. obviously used production allow anyone authenticated, can used testing authentication setup.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_beeceptor.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Guard using the mock OAuth servers provided by Beeceptor — guard_beeceptor","text":"","code":"guard_beeceptor_github(   redirect_url,   client_id = \"MOCK_CLIENT\",   ...,   name = \"beeceptor_github\" )  guard_beeceptor_google(   redirect_url,   client_id = \"MOCK_CLIENT\",   ...,   name = \"beeceptor_google\" )"},{"path":"https://thomasp85.github.io/fireproof/reference/guard_beeceptor.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Guard using the mock OAuth servers provided by Beeceptor — guard_beeceptor","text":"redirect_url URL authorization server redirect following successful authorization. Must equivalent one provided registering application client_id ID issued authorization server registering application ... Arguments passed guard_oauth2 token_url URL authorization servers token endpoint client_secret secret issued authorization server registering application. store plain text auth_url URL redirect user requesting authorization (needed grant_type = \"authorization_code\") grant_type type authorization scheme use, either \"authorization_code\" \"password\" oauth_scopes Optional character vector scopes request user grant authorization. influence scopes granted validate function fireproof scoping. named, names taken scopes elements descriptions scopes, e.g. given scope, read, can either provided c(\"read\") c(read = \"Grant read access\") validate Function validate user logged . called single argument info, gets information user provided user_info function . default returns TRUE everything meaning anyone can log provider accepted, can provide different function e.g. restrict access certain user names etc. function returns character vector considered authenticated return value understood scopes user granted. redirect_path path capture redirects successful authorization. default derived redirect_url removing domain part url, reason yields correct result server setup can overwrite . on_auth function handle result successful authorization. called four arguments: request, response, session_state, server. first contains current request responded , second response send back, third list recording state original request initiated authorization (containing method, url, headers, body fields information original request). default use replay_request internally replay original request send back response. user_info function extract user information access token. called single argument: token_info access token information returned OAuth 2 server successful authentication. function return new user_info list. service_params named list additional query params add url constructing authorization url \"authorization_code\" grant type scopes_delim separator scopes returned service. default \" \" spec recommendation services cough github cough non-compliant name name guard","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_beeceptor.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Guard using the mock OAuth servers provided by Beeceptor — guard_beeceptor","text":"GuardOAuth2 object","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_beeceptor.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Guard using the mock OAuth servers provided by Beeceptor — guard_beeceptor","text":"","code":"beeceptor <- guard_beeceptor_github(   redirect_url = \"https://example.com/auth\" )  # Add it to a fireproof plugin fp <- Fireproof$new() fp$add_guard(beeceptor, \"beeceptor_auth\")  # Use it in an endpoint fp$add_auth(\"get\", \"/*\", beeceptor_auth)"},{"path":"https://thomasp85.github.io/fireproof/reference/guard_github.html","id":null,"dir":"Reference","previous_headings":"","what":"Guard for authenticating with the GitHub OAuth 2.0 server — guard_github","title":"Guard for authenticating with the GitHub OAuth 2.0 server — guard_github","text":"guard requests log GitHub authenticates service. server must registered valid client ID client secret work. Register application https://github.com/settings/applications/new. want limit access select users make sure provide validate function checks userinfo whitelist.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_github.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Guard for authenticating with the GitHub OAuth 2.0 server — guard_github","text":"","code":"guard_github(redirect_url, client_id, client_secret, ..., name = \"github\")"},{"path":"https://thomasp85.github.io/fireproof/reference/guard_github.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Guard for authenticating with the GitHub OAuth 2.0 server — guard_github","text":"redirect_url URL authorization server redirect following successful authorization. Must equivalent one provided registering application client_id ID issued authorization server registering application client_secret secret issued authorization server registering application. store plain text ... Arguments passed guard_oauth2 grant_type type authorization scheme use, either \"authorization_code\" \"password\" oauth_scopes Optional character vector scopes request user grant authorization. influence scopes granted validate function fireproof scoping. named, names taken scopes elements descriptions scopes, e.g. given scope, read, can either provided c(\"read\") c(read = \"Grant read access\") validate Function validate user logged . called single argument info, gets information user provided user_info function . default returns TRUE everything meaning anyone can log provider accepted, can provide different function e.g. restrict access certain user names etc. function returns character vector considered authenticated return value understood scopes user granted. redirect_path path capture redirects successful authorization. default derived redirect_url removing domain part url, reason yields correct result server setup can overwrite . on_auth function handle result successful authorization. called four arguments: request, response, session_state, server. first contains current request responded , second response send back, third list recording state original request initiated authorization (containing method, url, headers, body fields information original request). default use replay_request internally replay original request send back response. service_params named list additional query params add url constructing authorization url \"authorization_code\" grant type scopes_delim separator scopes returned service. default \" \" spec recommendation services cough github cough non-compliant name name guard","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_github.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Guard for authenticating with the GitHub OAuth 2.0 server — guard_github","text":"GuardOAuth2 object","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_github.html","id":"user-information","dir":"Reference","previous_headings":"","what":"User information","title":"Guard for authenticating with the GitHub OAuth 2.0 server — guard_github","text":"guard_github() automatically adds user information according description guard_oauth2(). sets provider field \"github\". , extracts information https://api.github.com/user endpoint maps information accordingly: id -> id name -> name_display login -> name_user email -> emails avatar_url -> photos also sets .raw field full list information returned github.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_github.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Guard for authenticating with the GitHub OAuth 2.0 server — guard_github","text":"Documentation GitHub's OAuth 2 flow","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_github.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Guard for authenticating with the GitHub OAuth 2.0 server — guard_github","text":"","code":"github <- guard_github(   redirect_url = \"https://example.com/auth\",   client_id = \"MY_APP_ID\",   client_secret = \"SUCHASECRET\" )  # Add it to a fireproof plugin fp <- Fireproof$new() fp$add_guard(github, \"github_auth\")  # Use it in an endpoint fp$add_auth(\"get\", \"/*\", github_auth)"},{"path":"https://thomasp85.github.io/fireproof/reference/guard_google.html","id":null,"dir":"Reference","previous_headings":"","what":"Guard for Authenticating with the Google OpenID Connect server — guard_google","title":"Guard for Authenticating with the Google OpenID Connect server — guard_google","text":"guard requests log google authenticates service. server must registered valid client ID client secret work. Read registering application https://developers.google.com/identity/protocols/oauth2. want limit access select users make sure provide validate function checks userinfo whitelist.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_google.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Guard for Authenticating with the Google OpenID Connect server — guard_google","text":"","code":"guard_google(   redirect_url,   client_id,   client_secret,   oauth_scopes = \"profile\",   service_params = list(access_type = \"offline\", include_granted_scopes = \"true\"),   ...,   name = \"google\" )"},{"path":"https://thomasp85.github.io/fireproof/reference/guard_google.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Guard for Authenticating with the Google OpenID Connect server — guard_google","text":"redirect_url URL authorization server redirect following successful authorization. Must equivalent one provided registering application client_id ID issued authorization server registering application client_secret secret issued authorization server registering application. store plain text oauth_scopes Optional character vector scopes request user grant authorization. influence scopes granted validate function fireproof scoping. named, names taken scopes elements descriptions scopes, e.g. given scope, read, can either provided c(\"read\") c(read = \"Grant read access\") service_params named list additional query params add url constructing authorization url \"authorization_code\" grant type ... Arguments passed guard_oidc request_user_info Logical. userinfo endpoint followed add information user present JWT token. Setting TRUE add additional API call authentication flow potentially provide richer information user. grant_type type authorization scheme use, either \"authorization_code\" \"password\" validate Function validate user logged . called single argument info, gets information user provided user_info function . default returns TRUE everything meaning anyone can log provider accepted, can provide different function e.g. restrict access certain user names etc. function returns character vector considered authenticated return value understood scopes user granted. redirect_path path capture redirects successful authorization. default derived redirect_url removing domain part url, reason yields correct result server setup can overwrite . on_auth function handle result successful authorization. called four arguments: request, response, session_state, server. first contains current request responded , second response send back, third list recording state original request initiated authorization (containing method, url, headers, body fields information original request). default use replay_request internally replay original request send back response. name name guard","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_google.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Guard for Authenticating with the Google OpenID Connect server — guard_google","text":"GuardOIDC object","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_google.html","id":"user-information","dir":"Reference","previous_headings":"","what":"User information","title":"Guard for Authenticating with the Google OpenID Connect server — guard_google","text":"guard_google() automatically adds user information according description guard_oidc(). sets provider field \"google\".","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_google.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Guard for Authenticating with the Google OpenID Connect server — guard_google","text":"Documentation Googles OpenID Connect flow","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_google.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Guard for Authenticating with the Google OpenID Connect server — guard_google","text":"","code":"google <- guard_google(   redirect_url = \"https://example.com/auth\",   client_id = \"MY_APP_ID\",   client_secret = \"SUCHASECRET\" )  # Add it to a fireproof plugin fp <- Fireproof$new() fp$add_guard(google, \"google_auth\")  # Use it in an endpoint fp$add_auth(\"get\", \"/*\", google_auth)"},{"path":"https://thomasp85.github.io/fireproof/reference/guard_key.html","id":null,"dir":"Reference","previous_headings":"","what":"Shared secret guard — guard_key","title":"Shared secret guard — guard_key","text":"guard based mutually shared secret server client. client provides secret either header cookie, server verifies authenticity secret. Like basic authentication, scheme relies additional technology like HTTPS/SSL make secure since secret can otherwise easily extracted request man---middle attack.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_key.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Shared secret guard — guard_key","text":"","code":"guard_key(   key_name,   validate,   user_info = NULL,   cookie = TRUE,   name = \"KeyAuth\" )"},{"path":"https://thomasp85.github.io/fireproof/reference/guard_key.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Shared secret guard — guard_key","text":"key_name name header cookie store secret validate Either single string secret function called arguments key, request, response returns TRUE valid secret (useful multiple rotating secrets). function returns character vector considered authenticated return value understood scopes user granted. Make sure never store secrets plain text avoid checking version control. user_info function extract user information key. called single argument: key key used successful authentication. function return new user_info list. cookie Boolean. secret transmitted cookie. FALSE expected transmitted header. name name guard","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_key.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Shared secret guard — guard_key","text":"GuardKey object","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_key.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Shared secret guard — guard_key","text":"authentication classic HTTP authentication scheme thus return 401 response WWW-Authenticate header. Instead returns 400 response unless another guard already set response status something else.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_key.html","id":"user-information","dir":"Reference","previous_headings":"","what":"User information","title":"Shared secret guard — guard_key","text":"guard_key() automatically adds user information authentication. default set provider field \"local\". , set scopes field scopes returned validate function (provided validate passed function). Since key-based authentication seldom used user specific keys unlikely makes sense populate information .","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_key.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Shared secret guard — guard_key","text":"","code":"# Create a guard of dubious quality key <- guard_key(   key_name = \"my-key-location\",   validate = \"SHHH!!DONT_TELL_ANYONE\" )  # Add it to a fireproof plugin fp <- Fireproof$new() fp$add_guard(key, \"key_auth\")  # Use it in an endpoint fp$add_auth(\"get\", \"/*\", key_auth)"},{"path":"https://thomasp85.github.io/fireproof/reference/guard_oauth2.html","id":null,"dir":"Reference","previous_headings":"","what":"Guard based on OAuth 2.0 — guard_oauth2","title":"Guard based on OAuth 2.0 — guard_oauth2","text":"OAuth 2.0 authorization scheme powering much modern internet behind things like \"log GitHub\" etc. separates responsibility authentication away server, allows user grant limited access service users behalf. OAuth also allows server make request users behalf main purpose context fireproof validate user can perform successful login potentially extract basic information user. guard_oauth2() function base constructor can used create guards provider. ease use fireproof comes range predefined constructors popular services GitHub etc. Central need server register provider get client id client secret must used logging users .","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_oauth2.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Guard based on OAuth 2.0 — guard_oauth2","text":"","code":"guard_oauth2(   token_url,   redirect_url,   client_id,   client_secret,   auth_url = NULL,   grant_type = c(\"authorization_code\", \"password\"),   oauth_scopes = NULL,   validate = function(info) TRUE,   redirect_path = get_path(redirect_url),   on_auth = replay_request,   user_info = NULL,   service_params = list(),   scopes_delim = \" \",   name = \"OAuth2Auth\" )"},{"path":"https://thomasp85.github.io/fireproof/reference/guard_oauth2.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Guard based on OAuth 2.0 — guard_oauth2","text":"token_url URL authorization servers token endpoint redirect_url URL authorization server redirect following successful authorization. Must equivalent one provided registering application client_id ID issued authorization server registering application client_secret secret issued authorization server registering application. store plain text auth_url URL redirect user requesting authorization (needed grant_type = \"authorization_code\") grant_type type authorization scheme use, either \"authorization_code\" \"password\" oauth_scopes Optional character vector scopes request user grant authorization. influence scopes granted validate function fireproof scoping. named, names taken scopes elements descriptions scopes, e.g. given scope, read, can either provided c(\"read\") c(read = \"Grant read access\") validate Function validate user logged . called single argument info, gets information user provided user_info function . default returns TRUE everything meaning anyone can log provider accepted, can provide different function e.g. restrict access certain user names etc. function returns character vector considered authenticated return value understood scopes user granted. redirect_path path capture redirects successful authorization. default derived redirect_url removing domain part url, reason yields correct result server setup can overwrite . on_auth function handle result successful authorization. called four arguments: request, response, session_state, server. first contains current request responded , second response send back, third list recording state original request initiated authorization (containing method, url, headers, body fields information original request). default use replay_request internally replay original request send back response. user_info function extract user information access token. called single argument: token_info access token information returned OAuth 2 server successful authentication. function return new user_info list. service_params named list additional query params add url constructing authorization url \"authorization_code\" grant type scopes_delim separator scopes returned service. default \" \" spec recommendation services cough github cough non-compliant name name guard","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_oauth2.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Guard based on OAuth 2.0 — guard_oauth2","text":"GuardOAuth2 object","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_oauth2.html","id":"user-information","dir":"Reference","previous_headings":"","what":"User information","title":"Guard based on OAuth 2.0 — guard_oauth2","text":"guard_oauth2() automatically adds user information authentication, advised consult service provider information (done automatically provider specific guards. See documentation details information assigned field). base constructor set scopes field scopes returned validate function. also set token field list token data provided service authorization. standard fields list : access_token: actual token value token_type: type token (usually \"bearer\") expires_in: lifetime token seconds refresh_token: long-lived token can used issue new access token current becomes stale timestamp: time token received scopes: scopes granted user token OAuth 2.0 providers may choose supply others. Consult documentation provider learn additional fields may provide.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_oauth2.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Guard based on OAuth 2.0 — guard_oauth2","text":"OAuth 2.0 RFC","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_oauth2.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Guard based on OAuth 2.0 — guard_oauth2","text":"","code":"# Example using GitHub endpoints (use `guard_github()` in real code) github <- guard_oauth2(   token_url = \"https://github.com/login/oauth/access_token\",   redirect_url = \"https://example.com/auth\",   client_id = \"MY_APP_ID\",   client_secret = \"SUCHASECRET\",   auth_url = \"https://github.com/login/oauth/authorize\",   grant_type = \"authorization_code\" )  # Add it to a fireproof plugin fp <- Fireproof$new() fp$add_guard(github, \"github_auth\")  # Use it in an endpoint fp$add_auth(\"get\", \"/*\", github_auth)"},{"path":"https://thomasp85.github.io/fireproof/reference/guard_oidc.html","id":null,"dir":"Reference","previous_headings":"","what":"Guard based on OpenID Connect — guard_oidc","title":"Guard based on OpenID Connect — guard_oidc","text":"OpenID Connect authentication standard build top OAuth 2.0. OAuth 2.0 core authorization provide standardized approach extracting user information can used authentication. OpenID Connect fills gap number ways. First, token returned JSON Web Token (JWT) contains claims user, signed issuer. Second, authentication service provides means discovery relevant end points making rotation credentials etc easier. Third, claims users standardized authentication services easily interchangable. OAuth 2.0 authorization services provide OpenID Connect layer, , generally preferable use . guard_oidc() function base constructor can used create authenticators provider. ease use fireproof comes range predefined constructors popular services Google etc. Central need server register provider get client id client secret must used logging users .","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_oidc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Guard based on OpenID Connect — guard_oidc","text":"","code":"guard_oidc(   service_url,   redirect_url,   client_id,   client_secret,   grant_type = c(\"authorization_code\", \"password\"),   oauth_scopes = c(\"profile\"),   request_user_info = FALSE,   validate = function(info) TRUE,   redirect_path = get_path(redirect_url),   on_auth = replay_request,   service_name = service_url,   service_params = list(),   name = \"OIDCAuth\" )"},{"path":"https://thomasp85.github.io/fireproof/reference/guard_oidc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Guard based on OpenID Connect — guard_oidc","text":"service_url url authentication service redirect_url URL authorization server redirect following successful authorization. Must equivalent one provided registering application client_id ID issued authorization server registering application client_secret secret issued authorization server registering application. store plain text grant_type type authorization scheme use, either \"authorization_code\" \"password\" oauth_scopes Optional character vector scopes request user grant authorization. influence scopes granted validate function fireproof scoping. named, names taken scopes elements descriptions scopes, e.g. given scope, read, can either provided c(\"read\") c(read = \"Grant read access\") request_user_info Logical. userinfo endpoint followed add information user present JWT token. Setting TRUE add additional API call authentication flow potentially provide richer information user. validate Function validate user logged . called single argument info, gets information user provided user_info function . default returns TRUE everything meaning anyone can log provider accepted, can provide different function e.g. restrict access certain user names etc. function returns character vector considered authenticated return value understood scopes user granted. redirect_path path capture redirects successful authorization. default derived redirect_url removing domain part url, reason yields correct result server setup can overwrite . on_auth function handle result successful authorization. called four arguments: request, response, session_state, server. first contains current request responded , second response send back, third list recording state original request initiated authorization (containing method, url, headers, body fields information original request). default use replay_request internally replay original request send back response. service_name name service provider. passed provider slot user info list service_params named list additional query params add url constructing authorization url \"authorization_code\" grant type name name guard","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_oidc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Guard based on OpenID Connect — guard_oidc","text":"GuardOIDC object","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_oidc.html","id":"user-information","dir":"Reference","previous_headings":"","what":"User information","title":"Guard based on OpenID Connect — guard_oidc","text":"guard_oidc() automatically adds user information authentication, based standardized user claims provided id_token well additional user information provided userinfo_endpoint service request_user_info = TRUE. can see list standard user information defined OpenID Connect OpenID website. mapping new_user_info() follows: sub -> id name -> name_display given_name -> name_given middle_name -> name_middle family_name -> name_family email -> emails picture -> photos , set scopes field scopes returned validate function, provider field service_name, token field token information described guard_oauth2(), .raw full list user information provided unaltered service. aware information reported service depends oauth_scopes requested fireproof granted user. can therefore never assume existence information besides id, provider token.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/guard_oidc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Guard based on OpenID Connect — guard_oidc","text":"","code":"# Example using Google endpoint (use `guard_google()` in real code) google <- guard_oidc(   service_url = \"https://accounts.google.com/\",   redirect_url = \"https://example.com/auth\",   client_id = \"MY_APP_ID\",   client_secret = \"SUCHASECRET\" )  # Add it to a fireproof plugin fp <- Fireproof$new() fp$add_guard(google, \"google_auth\")  # Use it in an endpoint fp$add_auth(\"get\", \"/*\", google_auth)"},{"path":"https://thomasp85.github.io/fireproof/reference/new_user_info.html","id":null,"dir":"Reference","previous_headings":"","what":"Well structured user information — new_user_info","title":"Well structured user information — new_user_info","text":"Different services authentication schemes may present user information different ways. ensure ease interoperability, fireproof attempt standardize information gets extracted service. function intended called construct output user_info function.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/new_user_info.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Well structured user information — new_user_info","text":"","code":"new_user_info(   provider = NULL,   id = NULL,   name_display = NULL,   name_given = NULL,   name_middle = NULL,   name_family = NULL,   name_user = NULL,   emails = NULL,   photos = NULL,   ... )"},{"path":"https://thomasp85.github.io/fireproof/reference/new_user_info.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Well structured user information — new_user_info","text":"provider string naming provider user information id unique identifier user name_display, name_given, name_middle, name_family, name_user legal name user. combined single name field output structure c(given = name_given, middle = name_middle, family = name_family, display = name_display, user = name_user) emails character vector emails user. vector can named case names correspond category email, e.g. \"work\", \"home\" etc. photos character vector urls pointing profile pictures user. ... Additional named arguments added user information","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/new_user_info.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Well structured user information — new_user_info","text":"list class fireproof_user_info. fields list provided arguments except name_* arguments combined single field. See description arguments information.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/new_user_info.html","id":"setting-user-information","dir":"Reference","previous_headings":"","what":"Setting user information","title":"Well structured user information — new_user_info","text":"authentication scheme write field session data store named name. gets written can sometimes influenced user passing function user_info argument constructor. output function combined default information guard saved session storage (e.g. scopes field always created automatically).","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/new_user_info.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Well structured user information — new_user_info","text":"","code":"new_user_info(   provider = \"local\",   id = 1234,   name_display = \"thomasp85\",   name_given = \"Thomas\",   name_middle = \"Lin\",   name_family = \"Pedersen\" ) #> $provider #> [1] \"local\" #>  #> $id #> [1] 1234 #>  #> $name #>       given      middle      family     display  #>    \"Thomas\"       \"Lin\"  \"Pedersen\" \"thomasp85\"  #>  #> $emails #> NULL #>  #> $photos #> NULL #>  #> attr(,\"class\") #> [1] \"fireproof_user_info\""},{"path":"https://thomasp85.github.io/fireproof/reference/on_auth.html","id":null,"dir":"Reference","previous_headings":"","what":"Predefined functions for handling successful OAuth 2.0 authentication — on_auth","title":"Predefined functions for handling successful OAuth 2.0 authentication — on_auth","text":"using \"authorization code\" grant type OAuth 2.0 authorization flow, decide access token successfully retrieved. Since flow goes multiple redirection original request longer available access token retrieved. replay_request() function use saved session_state original request construct \"fake\" request replay server obtain response given user already authorized. redirect_back() function try redirect user back location send request prompted authorization. can also create function e.g. presents \"Successfully logged \" webpage. See Details information requirements function.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/on_auth.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Predefined functions for handling successful OAuth 2.0 authentication — on_auth","text":"","code":"replay_request(request, response, session_state, server)  redirect_back(request, response, session_state, server)  redirect_to(url)"},{"path":"https://thomasp85.github.io/fireproof/reference/on_auth.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Predefined functions for handling successful OAuth 2.0 authentication — on_auth","text":"request current request handled, reqres::Request object. result redirection authorization server. response response returned user reqres::Response object. session_state list stored information original request. Contains following fields: state (random string identifying authorization attempt), time (timestamp original request), method (http method original request), url (full url original request, including query string), headers (named list headers original request), body (raw vector body original request), (url original request sent ) server fiery server handling request url URL redirect successful authentication","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/on_auth.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Predefined functions for handling successful OAuth 2.0 authentication — on_auth","text":"TRUE request continue processing server FALSE response send straight away","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/on_auth.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Predefined functions for handling successful OAuth 2.0 authentication — on_auth","text":"Creating success handler easy just requires conform input arguments functions described . main purpose function modify response object send back user fit needs. routr handler return boolean indicating processing happen. situation usually sensible return FALSE.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/on_auth.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Predefined functions for handling successful OAuth 2.0 authentication — on_auth","text":"","code":"# These functions are never called directly but passed on to the `on_auth` # argument in OAuth 2.0 and OpenID Connect authentication flows  # Default google <- guard_google(   redirect_url = \"https://example.com/auth\",   client_id = \"MY_APP_ID\",   client_secret = \"SUCHASECRET\",   on_auth = replay_request )  # Alternative google <- guard_google(   redirect_url = \"https://example.com/auth\",   client_id = \"MY_APP_ID\",   client_secret = \"SUCHASECRET\",   on_auth = redirect_back )"},{"path":"https://thomasp85.github.io/fireproof/reference/prune_openapi.html","id":null,"dir":"Reference","previous_headings":"","what":"Ensure consistency of OpenAPI auth description — prune_openapi","title":"Ensure consistency of OpenAPI auth description — prune_openapi","text":"Prune OpenAPI doc security descriptions contains references schemes defined securitySchemes contains scopes schemes OAuth2.0 OpenID. OAuth2.0 specifically, scopes removed explicitly named securitySchemes.","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/prune_openapi.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Ensure consistency of OpenAPI auth description — prune_openapi","text":"","code":"prune_openapi(doc)"},{"path":"https://thomasp85.github.io/fireproof/reference/prune_openapi.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Ensure consistency of OpenAPI auth description — prune_openapi","text":"doc list describing full OpenAPI documentation","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/prune_openapi.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Ensure consistency of OpenAPI auth description — prune_openapi","text":"doc modified auth descriptions internally consistent","code":""},{"path":"https://thomasp85.github.io/fireproof/reference/prune_openapi.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Ensure consistency of OpenAPI auth description — prune_openapi","text":"","code":"# OpenAPI stub only containing relevant info for example openapi <- list(   components = list(     securitySchemes = list(       auth1 = list(         type = \"http\",         scheme = \"basic\"       ),       auth2 = list(         type = \"oauth2\",         flows = list(           authorizationCode = list(             scopes = list(               read = \"read data\",               write = \"change data\"             )           )         )       )     )   ),   # Global auth settings   security = list(     list(auth1 = c(\"read\", \"write\"))   ),   # Path specific auth settings   paths = list(     \"/user/{username}\" = list(       get = list(         security = list(           list(auth2 = c(\"read\", \"write\", \"commit\")),           list(auth3 = c(\"read\"))         )       )     )   ) )  prune_openapi(openapi) #> $components #> $components$securitySchemes #> $components$securitySchemes$auth1 #> $components$securitySchemes$auth1$type #> [1] \"http\" #>  #> $components$securitySchemes$auth1$scheme #> [1] \"basic\" #>  #>  #> $components$securitySchemes$auth2 #> $components$securitySchemes$auth2$type #> [1] \"oauth2\" #>  #> $components$securitySchemes$auth2$flows #> $components$securitySchemes$auth2$flows$authorizationCode #> $components$securitySchemes$auth2$flows$authorizationCode$scopes #> $components$securitySchemes$auth2$flows$authorizationCode$scopes$read #> [1] \"read data\" #>  #> $components$securitySchemes$auth2$flows$authorizationCode$scopes$write #> [1] \"change data\" #>  #>  #>  #>  #>  #>  #>  #> $security #> $security[[1]] #> $security[[1]]$auth1 #> character(0) #>  #>  #>  #> $paths #> $paths$`/user/{username}` #> $paths$`/user/{username}`$get #> $paths$`/user/{username}`$get$security #> $paths$`/user/{username}`$get$security[[1]] #> $paths$`/user/{username}`$get$security[[1]]$auth2 #> [1] \"read\"  \"write\" #>  #>  #>  #>  #>  #>"},{"path":[]},{"path":"https://thomasp85.github.io/fireproof/news/index.html","id":"fireproof-010","dir":"Changelog","previous_headings":"","what":"fireproof 0.1.0","title":"fireproof 0.1.0","text":"Initial CRAN submission.","code":""}]
