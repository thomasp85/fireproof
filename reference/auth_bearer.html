<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Bearer authentication plugin — auth_bearer • fireproof</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Bearer authentication plugin — auth_bearer"><meta property="og:description" content="Bearer authentication is a HTTP scheme powers most of the modern web
authentication as it is the foundation for OAuth 2.0 and OpenID. It is a
quite simple scheme that is based on the concept of tome and scope limited
bearer tokens. Whoever has a valid token gains access to the resources the
token unlocks. This prevents the leaking of passwords s well as make it easy
to rotate tokens etc. While the time-limited aspect of tokens means that an
attacker may only gain temporary access to a resource if they intercept a
token during transmission, it is still highly recommended to only transmit
tokens over HTTPS"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fireproof</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/thomasp85/fireproof/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Bearer authentication plugin</h1>
    <small class="dont-index">Source: <a href="https://github.com/thomasp85/fireproof/blob/main/R/auth_bearer.R" class="external-link"><code>R/auth_bearer.R</code></a></small>
    <div class="hidden name"><code>auth_bearer.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Bearer authentication is a HTTP scheme powers most of the modern web
authentication as it is the foundation for OAuth 2.0 and OpenID. It is a
quite simple scheme that is based on the concept of tome and scope limited
bearer tokens. Whoever has a valid token gains access to the resources the
token unlocks. This prevents the leaking of passwords s well as make it easy
to rotate tokens etc. While the time-limited aspect of tokens means that an
attacker may only gain temporary access to a resource if they intercept a
token during transmission, it is still highly recommended to only transmit
tokens over HTTPS</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">auth_bearer</span><span class="op">(</span></span>
<span>  <span class="va">authenticator</span>,</span>
<span>  user_info <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  realm <span class="op">=</span> <span class="st">"private"</span>,</span>
<span>  allow_body_token <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  allow_query_token <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  token_parser <span class="op">=</span> <span class="va">identity</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"BearerAuth"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-authenticator">authenticator<a class="anchor" aria-label="anchor" href="#arg-authenticator"></a></dt>
<dd><p>A function that will be called with the arguments
<code>token</code>, <code>realm</code>, <code>request</code>, and <code>response</code> and returns <code>TRUE</code> if the token
is valid, and <code>FALSE</code> otherwise. If the function returns a character vector
it is considered to be authenticated and the return value will be understood
as scopes the user is granted.</p></dd>


<dt id="arg-user-info">user_info<a class="anchor" aria-label="anchor" href="#arg-user-info"></a></dt>
<dd><p>A function to extract user information from the
username. It will be called with two arguments: <code>token</code> and <code>setter</code>,
the first being the token used for the successful authentication, the
second being a function that must be called in the end with the relevant
information. The <code>setter</code> function takes the following arguments:
<code>id</code> (the identifier of the user), <code>display_name</code> (the name the user has
chosen as public name), <code>name_given</code> (the users real given name),
<code>name_middle</code> (the users middle name), <code>name_family</code> (the users family
name), <code>emails</code> (a vector of emails, potentially named with type, e.g.
"work", "home" etc), <code>photos</code> (a vector of urls for profile photos),
and <code>...</code> with additional named fields to add.</p></dd>


<dt id="arg-realm">realm<a class="anchor" aria-label="anchor" href="#arg-realm"></a></dt>
<dd><p>The realm this authentication corresponds to. Will be returned
to the client on a failed authentication attempt to inform them of the
credentials required, though most often these days it is kept from the user.</p></dd>


<dt id="arg-allow-body-token">allow_body_token<a class="anchor" aria-label="anchor" href="#arg-allow-body-token"></a></dt>
<dd><p>Should it be allowed to pass the token in the request
body as a query form type with the <code>access_token</code> name. Defaults to <code>TRUE</code>
but you can turn it off to force the client to use the <code>Authorization</code>
header.</p></dd>


<dt id="arg-allow-query-token">allow_query_token<a class="anchor" aria-label="anchor" href="#arg-allow-query-token"></a></dt>
<dd><p>Should it be allowed to pass the token in the query
string of the url with the <code>access_token</code> name. Default to <code>FALSE</code> due to
severe security implications but can be turned on if you have very
well-thought-out reasons to do so.</p></dd>


<dt id="arg-token-parser">token_parser<a class="anchor" aria-label="anchor" href="#arg-token-parser"></a></dt>
<dd><p>Optional function to parse the token before passing it on
to the <code>authenticator</code> function.</p></dd>


<dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>The name of the authentication</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>An <a href="AuthBearer.html">AuthBearer</a> R6 object</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This authenticator will use a user provided function to test a token. The
complexity of the test fully depends on the issuer of the token. At it's
simplest the token is opaque and the function test it against a database.
However, it is more common to use a JSON web token to encode various
information into the token itself that can help in determining scoped access
etc.</p>
<p>The authenticator should in general not test the scope of the token, but
rather write the scope of the token to the <code>auth_scope</code> field of the response
data store (<code>response$set_data("auth_scope", ...)</code>). The scope requirement of
the exact endpoint will then be tested automatically. Further, the
authenticator should write any additional user information that gets fetched
during the validation to relevant fields in the response data</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Thomas Lin Pedersen.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

